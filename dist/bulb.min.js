var bulb=function(){"use strict";function e(e){return e.reduce((e,t)=>e.concat(t),[])}function t(e){return e}function r(e){return()=>e}function n(e){const t=e.length,r=n=>(...o)=>{const u=n.concat(o.length>0?o:void 0);return u.length>=t?e.apply(void 0,u):r(u)};return t<=1?e:r([])}function o(t){const r=t.length;return r<1?t:1===r?(...r)=>{const n=1===r.length?e(r):r;return t.call(this,n)}:(...e)=>{const n=Math.max(r-e.length-1,0),o=new Array(n),u=y.call(e,0,r-1),s=y.call(e,t.length-1);return t.apply(this,u.concat(o).concat([s]))}}function u(e){return Array.isArray(e)}function s(e){return"string"==typeof e}function c(e){return u(e)&&e.length>0&&e.reduce((e,t)=>e&&s(t),!0)}function i(e){return s(e)||c(e)?"":[]}function l(e){return s(e)?e.split(""):e}function a(e){return 0===e.length}function h(e){return e[0]}function f(e){return e.slice(1)}function m(e){return M(e,a(e)?[]:m(f(e)))}function p(e){return c(e)?j(e):u(e)?e.map(p):e}function b(t,r){return l(e(r)).reduce(E(k),t)}function d(e){return Array.apply(null,Array(e))}function v(e){return!e}const y=Array.prototype.slice,w=n((e,t)=>e(t)),x=(n((e,t,r)=>e(t,r)),n((e,t,r,n)=>e(t,r,n)),n((e,t)=>t(e))),g=o(e=>t=>e.reduceRight((e,t)=>t(e),t)),E=n((e,t,r)=>e(r,t)),L=(n((e,t)=>e(t[0],t[1])),n((e,t)=>(e(t),t))),_=n((e,t)=>t===e),k=(n((e,t)=>t!==e),n((e,t)=>e>t?1:e<t?-1:0),n((e,t)=>s(t)?t+e:t.concat([e]))),M=n((e,t)=>s(t)?e+t:[e].concat(t)),W=(n((e,t,r)=>k(t,M(e,r))),n((e,t)=>t+e),n((e,t)=>t-e),n((e,t)=>t*e),n((e,t)=>t/e),n((e,t)=>t%e),n((e,t)=>t>e?t:e),n((e,t)=>e>t?t:e),n((e,t)=>t>e),n((e,t)=>t>=e),n((e,t)=>t<e),n((e,t)=>t<=e),n((e,t)=>Math.floor(Math.random()*(t-e+1))+e)),j=(n((e,t)=>Math.random()*(t-e)+e),o(e=>b(i(e),e))),z=n((e,t)=>{const r=l(t).map(g(p,e));return b(i(r.length>0?r:t),r)}),A=n((e,t,r)=>l(r).reduce(e,t)),O=n((e,t,r)=>l(r).reduceRight(E(e),t)),I=(n((e,t,r)=>{const n=[t];return A((t,r)=>L(n.push.bind(n),e(t,r)),t,r),n}),n((e,t,r)=>{const n=[t];return O((t,r)=>L(n.unshift.bind(n),e(t,r)),t,r),n}),n((e,t)=>A((t,r)=>e(t,r)>0?t:r,t[0],t)),n((e,t)=>A((t,r)=>e(t,r)<0?t:r,t[0],t)),n((e,t)=>{let r=s(t)?"":[];const n=t.length;for(let o=0;o<Math.min(n,e);o++)r=r.concat(t[o]);return r})),T=n((e,t)=>{let r=s(t)?"":[];const n=t.length;for(let o=e;o<n;o++)r=r.concat(t[o]);return r}),C=n((e,t)=>{let r=s(t)?"":[];const n=t.length;for(let o=0;o<n&&e(t[o]);o++)r=r.concat(t[o]);return r}),S=n((e,t)=>{let r=s(t)?"":[];const n=t.length;let o=0;for(;e(t[o])&&o<t.length;)o++;for(let e=o;e<n;e++)r=r.concat(t[e]);return r}),P=(n((e,t)=>[I(e,t),T(e,t)]),n((e,t)=>[C(e,t),S(e,t)])),R=(n(function e(t,r){const n=h(r),o=P(t(n),f(r));return a(r)?[]:M(M(n,h(o)),e(t,function(e){return e[e.length-1]}(o)))}),n((e,t)=>[e,t])),q=(n((e,t)=>d(t).map((t,r)=>e+r)),n((e,t)=>{const r=s(t)?function(e){return d(e+1).join(" ")}(e):d(e);return z(()=>[t],r)}),n((e,t)=>I(e,function(e){let t=-1;const r=d(e.length),n=A((e,r)=>{const n=W(0,++t);return e[t]=e[n],e[n]=r,e},r,e);return b(s(e)?"":[],n)}(t))),n((e,t)=>l(t).map(e))),N=e=>l(e).reduce(E(M),i(e)),X=(n((e,t)=>{const r=t=>a(t)?i(t):j(e,h(t),r(f(t)));return a(t)?i(t):j(h(t),r(f(t)))}),n((e,t)=>t&&e)),Y=n((e,t)=>t||e),B=n((e,t,r,n)=>e(n)?t(n):r(n)),D=(n((e,t)=>e.map(x(t)).reduce(X,!0)),n((e,t)=>e.map(x(t)).reduce(Y,!1)),n((e,t)=>t.indexOf(e)>=0)),F=(n((e,t)=>{const r=t.indexOf(e);return r>=0?r:void 0}),n((e,t)=>F(_(e),t)),n((e,t)=>h(G(e,t))),n((e,t)=>{const r=t.length;for(let n=0;n<r;n++)if(e(t[n]))return n}),n((e,t)=>{const r=[],n=t.length;for(let o=0;o<n;o++)e(t[o])&&r.push(o);return r})),G=n((e,n)=>{const o=B(e,t,r(""));return s(n)?z(o,n):n.filter(e)}),H=(n((e,t)=>[G(e,t),G(g(v,e),t)]),n((e,t)=>G(e,t).length===t.length),n((e,t)=>G(e,t).length>0)),J=n(function e(t,r){return!!a(t)||!a(r)&&(h(t)===h(r)&&e(f(t),f(r)))}),K=(n((e,t)=>J(N(e),N(t))),n((e,t)=>H(J(e),m(t))),n(function e(t,r){const n=h(r);return a(r)?i(r):M(n,e(t,G(e=>!t(n,e),f(r))))}),n((e,t)=>A((e,t)=>D(t,e)?e:k(t,e),e,t)),n((e,t)=>A((e,r)=>D(r,t)?k(r,e):e,i(e),e)),n((e,t)=>A(E(Q),e,t))),Q=n((e,t)=>U(_,e,t)),U=n(function e(t,r,n){const o=h(n),u=f(n);return a(n)?i(n):t(r,o)?u:M(o,e(t,r,u))}),V=(n(function e(t,r){return a(t)?[]:j(q(R(h(t)),r),e(f(t),r))}),n((e,t)=>{return function(e,t){return"string"===t?e.join(""):e}(l(t.slice(0)).sort(e),typeof t)}),n((e,t,r)=>{const n=Math.min(t.length,r.length);return l(t.slice(0,n)).map((t,n)=>e(t,r[n]))})),Z=(n((e,t)=>V(R,e,t)),n((e,t,r)=>r[e](t)),n((e,t,r,n)=>n[e](t,r)),n((e,t,r,n,o)=>o[e](t,r,n)),o((e,t)=>(function(e,t){return t.forEach(t=>{Object.getOwnPropertyNames(t).forEach(r=>{e[r]=t[r]})}),e})(new e.constructor,[e].concat(t)))),$=n((e,t)=>t[e]),ee=(n((e,t)=>e.reduce((e,t)=>void 0!==e?e[t]:void 0,t)),n((e,t,r)=>{const n={};return n[e]=t,Z(r,n)}));n((e,t,r)=>ee(e,t($(e,r)),r)),n((e,t)=>e.reduce((e,r)=>ee(r,$(r,t),e),{})),n((e,t)=>K(function(e){return Object.keys(e)}(t),e).reduce((e,r)=>ee(r,$(r,t),e),{})),n((e,t,r)=>r.replace(e,t));class te{constructor(e,t){this.observer=e,this.unsubscribe=t}}class re{constructor(e){if("function"!=typeof e)throw new TypeError("Signal mount must be a function");this._mount=e,this._unmount=void 0,this._subscriptions=new Set}mount(e){try{this._unmount=this._mount(e)}catch(t){e.error(t)}}unmount(){if("function"==typeof this._unmount)try{this._unmount()}catch(e){}this._unmount=void 0}subscribe(e,...t){"function"==typeof e?e={next:e,error:t[0],complete:t[1]}:"object"!=typeof e&&(e={});const r=e=>{for(let t of this._subscriptions)"function"==typeof t.observer.next&&t.observer.next(e)},n=e=>{for(let t of this._subscriptions)"function"==typeof t.observer.error&&t.observer.error(e)},o=()=>{for(let e of this._subscriptions)"function"==typeof e.observer.complete&&e.observer.complete()},u=new te(e,()=>{this._subscriptions.delete(u),0===this._subscriptions.size&&this.unmount()});return this._subscriptions.add(u),1===this._subscriptions.size&&this.mount({next:r,error:n,complete:o}),u}static empty(){return new re(e=>{e.complete()})}static never(){return new re(r)}static of(e){return new re(t=>{t.next(e),t.complete()})}static fromArray(e){return new re(t=>{e.map(w(t.next)),t.complete()})}static fromCallback(e){return new re(t=>{e((e,r)=>{void 0!==e&&null!==e?t.error(e):t.next(r)})})}static fromEvent(e,t,r=!0){return new re(n=>{const o=g(n.next,$("detail"));return t.addListener?t.addListener(e,n.next):t.addEventListener&&t.addEventListener(e,o,r),()=>{t.addListener?t.removeListener(e,n.next):t.removeEventListener("type",o,r)}})}static fromPromise(e){return new re(t=>{e.then(t.next,t.error).finally(t.complete)})}static periodic(e){let t;return new re(r=>(t=setInterval(()=>r.next(),e),()=>clearInterval(t)))}static sequentially(e,t){let r;return new re(n=>(r=setInterval(()=>{n.next(h(t)),a(t=f(t))&&(clearInterval(r),n.complete())},e),()=>clearInterval(r)))}always(e){return new re(t=>{return this.subscribe(()=>t.next(e),t.error,t.complete)})}delay(e){let t;return new re(r=>{return this.subscribe(n=>{t=setTimeout(()=>r.next(n),e)},r.error,()=>{setTimeout(()=>r.complete(),e)}),()=>clearTimeout(t)})}concatMap(e){return new re(t=>{return this.subscribe(r=>{e(r).subscribe(t.next,t.error)},t.error,t.complete)})}map(e){return new re(t=>this.subscribe(g(t.next,e),t.error,t.complete))}filter(e){return new re(t=>{return this.subscribe(r=>{e(r)&&t.next(r)},t.error,t.complete)})}fold(e,t){return new re(r=>{return this.subscribe(r=>{t=e(t,r)},r.error,()=>{r.next(t),r.complete()})})}scan(e,t){return new re(r=>{r.next(t);return this.subscribe(n=>{t=e(t,n),r.next(t)},r.error,r.complete)})}stateMachine(e,t){return new re(r=>{return this.subscribe(n=>{const{value:o,emit:u}=e(t,n);t=o,void 0!==u&&r.next(u)},r.error,r.complete)})}merge(e){let t=0;return new re(r=>{const n=()=>{++t>e.length&&r.complete()};this.subscribe(r.next,r.error,n);const o=e.map(e=>e.subscribe(r.next,r.error,n));return()=>o.forEach(e=>e.unsubscribe())})}zip(e){return this.zipWith(R,e)}zipWith(e,t){let r=null,n=0;return new re(o=>{const u=(t,n)=>{r||(r=[]),r[n]=t,r.length>=2&&(o.next(e(r[0],r[1])),r=null)},s=()=>{++n>=2&&o.complete()};this.subscribe(e=>u(e,0),o.error,s);const c=t.subscribe(e=>u(e,1),o.error,s);return()=>c.unsubscribe()})}sample(e){return this.sampleWith(t,e)}sampleWith(e,t){let r;return new re(n=>{this.subscribe(e=>{r=e},n.error,n.complete);const o=t.subscribe(t=>n.next(e(r,t)),n.error);return()=>o.unsubscribe()})}hold(e){return this.holdWith(t,e)}holdWith(e,t){let r;return new re(n=>{this.subscribe(e=>{r||n.next(e)},n.error,n.complete);const o=t.subscribe(t=>{r=e(t)},n.error);return()=>o.unsubscribe()})}dedupe(){return this.dedupeWith(_)}dedupeWith(e){let t;return new re(r=>{this.subscribe(n=>{e(n,t)||r.next(n),t=n},r.error,r.complete)})}}var ne=Object.freeze({keys:function(e){let t={};return new re(r=>{const n=e=>{t[e.keyCode]=!0,r.next(t)},o=e=>{delete t[e.keyCode],r.next(t)};return e.addEventListener("keydown",n,!0),e.addEventListener("keyup",o,!0),()=>{e.removeEventListener("keydown",n,!0),e.removeEventListener("keyup",o,!0)}})}}),oe=Object.freeze({position:function(e){return new re(t=>{const r=e=>t.next([e.clientX,e.clientY]);return e.addEventListener("mousemove",r,!0),()=>e.removeEventListener("mousemove",r,!0)})},button:function(e){return new re(t=>{const r=e=>t.next(!0),n=e=>t.next(!1);return e.addEventListener("mousedown",r,!0),e.addEventListener("mouseup",n,!0),()=>{e.removeEventListener("mousedown",r,!0),e.removeEventListener("mouseup",n,!0)}})}});return{Signal:re,keyboard:ne,mouse:oe}}();
