var bulb=function(){"use strict";function e(e){return e.reduce((e,t)=>e.concat(t),[])}function t(e){return e}function n(e){return()=>e}function r(e){const t=e.length,n=r=>(...o)=>{const u=r.concat(o.length>0?o:void 0);return u.length>=t?e.apply(void 0,u):n(u)};return t<=1?e:n([])}function o(t){const n=t.length;return n<1?t:1===n?(...n)=>{const r=1===n.length?e(n):n;return t.call(this,r)}:(...e)=>{const r=Math.max(n-e.length-1,0),o=new Array(r),u=y.call(e,0,n-1),s=y.call(e,t.length-1);return t.apply(this,u.concat(o).concat([s]))}}function u(e){return Array.isArray(e)}function s(e){return"string"==typeof e}function c(e){return u(e)&&e.length>0&&e.reduce((e,t)=>e&&s(t),!0)}function i(e){return s(e)||c(e)?"":[]}function l(e){return s(e)?e.split(""):e}function a(e){return 0===e.length}function h(e){return e[0]}function f(e){return e.slice(1)}function m(e){return M(e,a(e)?[]:m(f(e)))}function p(e){return c(e)?j(e):u(e)?e.map(p):e}function b(t,n){return l(e(n)).reduce(E(k),t)}function d(e){return Array.apply(null,Array(e))}function v(e){return!e}const y=Array.prototype.slice,w=r((e,t)=>e(t)),x=(r((e,t,n)=>e(t,n)),r((e,t,n,r)=>e(t,n,r)),r((e,t)=>t(e))),g=o(e=>t=>e.reduceRight((e,t)=>t(e),t)),E=r((e,t,n)=>e(n,t)),L=(r((e,t)=>e(t[0],t[1])),r((e,t)=>(e(t),t))),_=r((e,t)=>t===e),k=(r((e,t)=>t!==e),r((e,t)=>e>t?1:e<t?-1:0),r((e,t)=>s(t)?t+e:t.concat([e]))),M=r((e,t)=>s(t)?e+t:[e].concat(t)),W=(r((e,t,n)=>k(t,M(e,n))),r((e,t)=>t+e),r((e,t)=>t-e),r((e,t)=>t*e),r((e,t)=>t/e),r((e,t)=>t%e),r((e,t)=>t>e?t:e),r((e,t)=>e>t?t:e),r((e,t)=>t>e),r((e,t)=>t>=e),r((e,t)=>t<e),r((e,t)=>t<=e),r((e,t)=>Math.floor(Math.random()*(t-e+1))+e)),j=(r((e,t)=>Math.random()*(t-e)+e),o(e=>b(i(e),e))),z=r((e,t)=>{const n=l(t).map(g(p,e));return b(i(n.length>0?n:t),n)}),A=r((e,t,n)=>l(n).reduce(e,t)),I=r((e,t,n)=>l(n).reduceRight(E(e),t)),O=(r((e,t,n)=>{const r=[t];return A((t,n)=>L(r.push.bind(r),e(t,n)),t,n),r}),r((e,t,n)=>{const r=[t];return I((t,n)=>L(r.unshift.bind(r),e(t,n)),t,n),r}),r((e,t)=>A((t,n)=>e(t,n)>0?t:n,t[0],t)),r((e,t)=>A((t,n)=>e(t,n)<0?t:n,t[0],t)),r((e,t)=>{let n=s(t)?"":[];const r=t.length;for(let o=0;o<Math.min(r,e);o++)n=n.concat(t[o]);return n})),S=r((e,t)=>{let n=s(t)?"":[];const r=t.length;for(let o=e;o<r;o++)n=n.concat(t[o]);return n}),T=r((e,t)=>{let n=s(t)?"":[];const r=t.length;for(let o=0;o<r&&e(t[o]);o++)n=n.concat(t[o]);return n}),C=r((e,t)=>{let n=s(t)?"":[];const r=t.length;let o=0;for(;e(t[o])&&o<t.length;)o++;for(let e=o;e<r;e++)n=n.concat(t[e]);return n}),P=(r((e,t)=>[O(e,t),S(e,t)]),r((e,t)=>[T(e,t),C(e,t)])),R=(r(function e(t,n){const r=h(n),o=P(t(r),f(n));return a(n)?[]:M(M(r,h(o)),e(t,function(e){return e[e.length-1]}(o)))}),r((e,t)=>[e,t])),q=(r((e,t)=>d(t).map((t,n)=>e+n)),r((e,t)=>{const n=s(t)?function(e){return d(e+1).join(" ")}(e):d(e);return z(()=>[t],n)}),r((e,t)=>O(e,function(e){let t=-1;const n=d(e.length),r=A((e,n)=>{const r=W(0,++t);return e[t]=e[r],e[r]=n,e},n,e);return b(s(e)?"":[],r)}(t))),r((e,t)=>l(t).map(e))),N=e=>l(e).reduce(E(M),i(e)),X=(r((e,t)=>{const n=t=>a(t)?i(t):j(e,h(t),n(f(t)));return a(t)?i(t):j(h(t),n(f(t)))}),r((e,t)=>t&&e)),Y=r((e,t)=>t||e),B=r((e,t,n,r)=>e(r)?t(r):n(r)),D=(r((e,t)=>e.map(x(t)).reduce(X,!0)),r((e,t)=>e.map(x(t)).reduce(Y,!1)),r((e,t)=>t.indexOf(e)>=0)),F=(r((e,t)=>{const n=t.indexOf(e);return n>=0?n:void 0}),r((e,t)=>F(_(e),t)),r((e,t)=>h(G(e,t))),r((e,t)=>{const n=t.length;for(let r=0;r<n;r++)if(e(t[r]))return r}),r((e,t)=>{const n=[],r=t.length;for(let o=0;o<r;o++)e(t[o])&&n.push(o);return n})),G=r((e,r)=>{const o=B(e,t,n(""));return s(r)?z(o,r):r.filter(e)}),H=(r((e,t)=>[G(e,t),G(g(v,e),t)]),r((e,t)=>G(e,t).length===t.length),r((e,t)=>G(e,t).length>0)),J=r(function e(t,n){return!!a(t)||!a(n)&&(h(t)===h(n)&&e(f(t),f(n)))}),K=(r((e,t)=>J(N(e),N(t))),r((e,t)=>H(J(e),m(t))),r(function e(t,n){const r=h(n);return a(n)?i(n):M(r,e(t,G(e=>!t(r,e),f(n))))}),r((e,t)=>A((e,t)=>D(t,e)?e:k(t,e),e,t)),r((e,t)=>A((e,n)=>D(n,t)?k(n,e):e,i(e),e)),r((e,t)=>A(E(Q),e,t))),Q=r((e,t)=>U(_,e,t)),U=r(function e(t,n,r){const o=h(r),u=f(r);return a(r)?i(r):t(n,o)?u:M(o,e(t,n,u))}),V=(r(function e(t,n){return a(t)?[]:j(q(R(h(t)),n),e(f(t),n))}),r((e,t)=>{return function(e,t){return"string"===t?e.join(""):e}(l(t.slice(0)).sort(e),typeof t)}),r((e,t,n)=>{const r=Math.min(t.length,n.length);return l(t.slice(0,r)).map((t,r)=>e(t,n[r]))})),Z=(r((e,t)=>V(R,e,t)),r((e,t,n)=>n[e](t)),r((e,t,n,r)=>r[e](t,n)),r((e,t,n,r,o)=>o[e](t,n,r)),o((e,t)=>(function(e,t){return t.forEach(t=>{Object.getOwnPropertyNames(t).forEach(n=>{e[n]=t[n]})}),e})(new e.constructor,[e].concat(t)))),$=r((e,t)=>t[e]),ee=(r((e,t)=>e.reduce((e,t)=>void 0!==e?e[t]:void 0,t)),r((e,t,n)=>{const r={};return r[e]=t,Z(n,r)}));r((e,t,n)=>ee(e,t($(e,n)),n)),r((e,t)=>e.reduce((e,n)=>ee(n,$(n,t),e),{})),r((e,t)=>K(function(e){return Object.keys(e)}(t),e).reduce((e,n)=>ee(n,$(n,t),e),{})),r((e,t,n)=>n.replace(e,t));class te{constructor(e,t){this.observer=e,this.unsubscribe=t}}class ne{constructor(e){if("function"!=typeof e)throw new TypeError("Signal mount must be a function");this._mount=e,this._unmount=void 0,this._subscriptions=new Set}mount(e){try{this._unmount=this._mount(e)}catch(t){e.error(t)}}unmount(){if("function"==typeof this._unmount)try{this._unmount()}catch(e){}this._unmount=void 0}subscribe(e,...t){"function"==typeof e?e={next:e,error:t[0],complete:t[1]}:"object"!=typeof e&&(e={});const n=e=>{for(let t of this._subscriptions)"function"==typeof t.observer.next&&t.observer.next(e)},r=e=>{for(let t of this._subscriptions)"function"==typeof t.observer.error&&t.observer.error(e)},o=()=>{for(let e of this._subscriptions)"function"==typeof e.observer.complete&&e.observer.complete()},u=new te(e,()=>{this._subscriptions.delete(u),0===this._subscriptions.size&&this.unmount()});return this._subscriptions.add(u),1===this._subscriptions.size&&this.mount({next:n,error:r,complete:o}),u}static empty(){return new ne(e=>{e.complete()})}static never(){return new ne(n)}static of(e){return new ne(t=>{t.next(e),t.complete()})}static fromArray(e){return new ne(t=>{e.map(w(t.next)),t.complete()})}static fromCallback(e){return new ne(t=>{e((e,n)=>{void 0!==e&&null!==e?t.error(e):t.next(n)})})}static fromEvent(e,t,n=!0){return new ne(r=>{const o=g(r.next,$("detail"));return t.addListener?t.addListener(e,r.next):t.addEventListener&&t.addEventListener(e,o,n),()=>{t.addListener?t.removeListener(e,r.next):t.removeEventListener("type",o,n)}})}static fromPromise(e){return new ne(t=>{e.then(t.next,t.error).finally(t.complete)})}static periodic(e){let t;return new ne(n=>(t=setInterval(()=>n.next(),e),()=>clearInterval(t)))}static sequentially(e,t){let n;return new ne(r=>(n=setInterval(()=>{r.next(h(t)),a(t=f(t))&&(clearInterval(n),r.complete())},e),()=>clearInterval(n)))}always(e){return new ne(t=>{return this.subscribe(()=>t.next(e),t.error,t.complete)})}startWith(e){return new ne(t=>(t.next(e),this.subscribe(t)))}delay(e){let t;return new ne(n=>{return this.subscribe(r=>{t=setTimeout(()=>n.next(r),e)},n.error,()=>{setTimeout(()=>n.complete(),e)}),()=>clearTimeout(t)})}concatMap(e){return new ne(t=>{return this.subscribe(n=>{e(n).subscribe(t.next,t.error)},t.error,t.complete)})}map(e){return new ne(t=>this.subscribe(g(t.next,e),t.error,t.complete))}filter(e){return new ne(t=>{return this.subscribe(n=>{e(n)&&t.next(n)},t.error,t.complete)})}fold(e,t){return new ne(n=>{return this.subscribe(n=>{t=e(t,n)},n.error,()=>{n.next(t),n.complete()})})}scan(e,t){return new ne(n=>{n.next(t);return this.subscribe(r=>{t=e(t,r),n.next(t)},n.error,n.complete)})}stateMachine(e,t){return new ne(n=>{return this.subscribe(r=>{const o=e(t,r);t=o&&o.value,o&&void 0!==o.emit&&n.next(o.emit)},n.error,n.complete)})}merge(e){let t=0;return new ne(n=>{const r=()=>{++t>e.length&&n.complete()};this.subscribe(n.next,n.error,r);const o=e.map(e=>e.subscribe(n.next,n.error,r));return()=>o.forEach(e=>e.unsubscribe())})}zip(e){return this.zipWith(R,e)}zipWith(e,t){let n=null,r=0;return new ne(o=>{const u=(t,r)=>{n||(n=[]),n[r]=t,n.length>=2&&(o.next(e(n[0],n[1])),n=null)},s=()=>{++r>=2&&o.complete()};this.subscribe(e=>u(e,0),o.error,s);const c=t.subscribe(e=>u(e,1),o.error,s);return()=>c.unsubscribe()})}sample(e){return this.sampleWith(t,e)}sampleWith(e,t){let n;return new ne(r=>{this.subscribe(e=>{n=e},r.error,r.complete);const o=t.subscribe(t=>r.next(e(n,t)),r.error);return()=>o.unsubscribe()})}hold(e){return this.holdWith(t,e)}holdWith(e,t){let n;return new ne(r=>{this.subscribe(e=>{n||r.next(e)},r.error,r.complete);const o=t.subscribe(t=>{n=e(t)},r.error);return()=>o.unsubscribe()})}dedupe(){return this.dedupeWith(_)}dedupeWith(e){return this.stateMachine((t,n)=>{let r;return e(t,n)||(r=n),{value:n,emit:r}})}}var re=Object.freeze({keys:function(e){let t=new Set;return new ne(n=>{const r=e=>{const r=parseInt(e.keyCode);t.has(r)||(t.add(r),n.next(t))},o=e=>{const r=parseInt(e.keyCode);t.has(r)&&(t.delete(r),n.next(t))};return e.addEventListener("keydown",r,!0),e.addEventListener("keyup",o,!0),()=>{e.removeEventListener("keydown",r,!0),e.removeEventListener("keyup",o,!0)}})}}),oe=Object.freeze({position:function(e){return new ne(t=>{const n=e=>t.next([e.clientX,e.clientY]);return e.addEventListener("mousemove",n,!0),()=>e.removeEventListener("mousemove",n,!0)})},button:function(e){return new ne(t=>{const n=e=>t.next(!0),r=e=>t.next(!1);return e.addEventListener("mousedown",n,!0),e.addEventListener("mouseup",r,!0),()=>{e.removeEventListener("mousedown",n,!0),e.removeEventListener("mouseup",r,!0)}})}});return{Signal:ne,keyboard:re,mouse:oe}}();
